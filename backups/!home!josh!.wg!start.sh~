#!/bin/sh

wgup0=$(ls /sys/class/net | grep -c wg0)

if [ $wgup0 = 1 ] ; then
echo "WG0 up, reapplying setting."
ip link set down dev wg0
ip link delete dev wg0
ip link add dev wg0 type wireguard
ip addr add 4.3.2.2/24 dev wg0
wg setconf wg0 ~/.wg/config
ip link set up dev wg0
fi

if [ $wgup0 = 0 ] ; then
echo "WG0 down, starting . . ."
ip link add dev wg0 type wireguard
ip addr add 4.3.2.2/24 dev wg0
wg setconf wg0 ~/.wg/config
ip link set up dev wg0
fi

